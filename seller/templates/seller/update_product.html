{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>ìƒí’ˆ ì •ë³´ ìˆ˜ì •</title>

  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">
    <style>
        #footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 15px;
      text-align: center;
      z-index: 100;
      background-color: #f1f3f5;
    }
  </style>
</head>

<body class="bg-light">

  <!-- Header -->
  <header id="header" class="header d-flex align-items-center sticky-top" style="background-color: #fff8dc;">
    {% include 'single_pages/navbar.html' %}
  </header>

  <!-- Main Content -->
  <div class="container py-5">
    <h2 class="text-center mb-5">ìƒí’ˆ ì •ë³´ ìˆ˜ì •</h2>

    <div class="row">
      <!-- ê¸°ì¡´ ì •ë³´ ì¹´ë“œ -->
      <div class="col-md-6 mb-4">
        <div class="card border-secondary h-100">
          <div class="card-header bg-secondary text-white">ê¸°ì¡´ ìƒí’ˆ ì •ë³´</div>
          <div class="card-body">
            {% if product.uploaded_image %}
              <img src="{{ product.uploaded_image.url }}" alt="{{ product.name }}" class="img-fluid mb-3 rounded">
            {% endif %}
            <p><strong>ìƒí’ˆëª…:</strong> {{ product.name }}</p>
            <p><strong>ê°€ê²©:</strong> {{ product.price }}</p>
            <p><strong>ìˆ˜ëŸ‰:</strong> {{ product.quantity }}</p>
          </div>
        </div>
      </div>

      <!-- ìˆ˜ì • í¼ ì¹´ë“œ -->
      <div class="col-md-6 mb-4">
        <div class="card shadow-sm h-100">
          <div class="card-header bg-primary text-white">ìˆ˜ì •í•  ë‚´ìš©</div>
          <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}

              <div class="mb-3">
                <label for="id_name" class="form-label">ìƒí’ˆëª…</label>
                {{ form.name }}
              </div>

              <div class="mb-3">
                <label for="id_category" class="form-label">ì¹´í…Œê³ ë¦¬</label>
                {{ form.category }}
              </div>

              <div class="mb-3">
                <label for="id_price" class="form-label">ê°€ê²©</label>
                {{ form.price }}
              </div>

              <div class="mb-3">
                <label for="id_quantity" class="form-label">ìˆ˜ëŸ‰</label>
                {{ form.quantity }}
              </div>

              <div class="mb-3">
                <label for="id_uploaded_image" class="form-label">ìƒí’ˆ ì´ë¯¸ì§€</label>
                {{ form.uploaded_image }}
              </div>

              <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary px-4">ì €ì¥í•˜ê¸°</button>
                <a href="{% url 'seller_dashboard' %}" class="btn btn-secondary ms-2">ì·¨ì†Œ</a>
              </div>
            </form>

            <!-- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° -->
            <hr class="my-4">
            <h5 class="text-muted">ğŸ–¼ï¸ ìˆ˜ì • ë¯¸ë¦¬ë³´ê¸°</h5>
            <div class="border p-3 rounded bg-light">
              <img id="preview-image" src="#" alt="ë¯¸ë¦¬ë³´ê¸°" class="img-fluid rounded d-none mb-3" />
              <p><strong>ìƒí’ˆëª…:</strong> <span id="preview-name">-</span></p>
              <p><strong>ê°€ê²©:</strong> <span id="preview-price">-</span></p>
              <p><strong>ìˆ˜ëŸ‰:</strong> <span id="preview-quantity">-</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  {% include 'single_pages/footer.html' %}

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>

  <!-- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
    document.getElementById("id_uploaded_image").addEventListener("change", function(event) {
      const file = event.target.files[0];
      const preview = document.getElementById("preview-image");

      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          preview.classList.remove("d-none");
        };
        reader.readAsDataURL(file);
      } else {
        preview.src = "#";
        preview.classList.add("d-none");
      }
    });

    // í…ìŠ¤íŠ¸ í•„ë“œ ì‹¤ì‹œê°„ ë°˜ì˜
    document.getElementById("id_name").addEventListener("input", function(e) {
      document.getElementById("preview-name").textContent = e.target.value || "-";
    });

    document.getElementById("id_price").addEventListener("input", function(e) {
      document.getElementById("preview-price").textContent = e.target.value || "-";
    });

    document.getElementById("id_quantity").addEventListener("input", function(e) {
      document.getElementById("preview-quantity").textContent = e.target.value || "-";
    });
  </script>
</body>
</html>